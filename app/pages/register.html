<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensors-Registration</title>
    <link rel="stylesheet" href="../css/register.css"/> 
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
</head>

<body>
	<a class="navbar-brand" href="#">
		<img src="../assets/logos/Logo.png" width="100" height="35" style="margin:10px 165px">
	</a>
	<div class="alert alert-success" style="display: none;" id="flash-container" role="alert"></div>
    <div class="container">
	<br><br><br>    
        <div class="title">Sensors-Registration</div>
        <div class="formContainer">
        <form>
		<div class="form-groupleft">
			<br><br><br>
			<label for="name"> Name</label>
			<input id="name" type="text" name="Name" class="name" placeholder="Your name..*" required>
			<br>
			<label for="email">Email</label>
			<input id="email" type="text" name="Email" class="email" placeholder="Your Email..*" required>
			<br>
			<label for="password">Password </label>
			<input id="password" type="password" name="password" class="password" placeholder="Your Password..*" required>
			<br>
			<label for="phone">Phone No</label>
			<input id="mobno" type="text" maxlength="14" pattern="[+][0-9]{2}[-][0-9]{10}" name="MobileNo" class="phoneno" placeholder="+91-1234567890*" required>
			
		</div>
		<br><br><br>
		<div class="form-groupright">
                	<label for="department">Department</label>
                	<input id="dept" type="text" name="Department" class="department" placeholder="Your Department..*" required>
			<br>
			<label for="year">Year of Graduation</label>
			<input id="year" type="text" name="Year" maxlength="4" pattern="[2][0-9]{3}" class="year" placeholder="Your Year of Graduation*" required>
			<br>
			<label for="clg">College</label>
			<input id="clg" type="text" name="College" class="college" placeholder="Your College...*" required>
			<p>Already have an account? Login <a href="./login.html">here</a></p>
		</div>
		<button class="submit" id="submit-btn">Sign Up</button>
	    </form>
        </div>
	<!-- <br><br> -->
    </div>

	<script>
		const sendData = async () => {
				const email = document.getElementById("email").value;
				const password = document.getElementById("password").value;
				const name = document.getElementById("name").value;
				const year = document.getElementById("year").value;
				const mobno = document.getElementById("mobno").value;
				const clg = document.getElementById("clg").value;
				const dept = document.getElementById("dept").value;
				const flashContainer = document.getElementById("flash-container");
				let axiosConfig = {
					headers: {
						'Content-Type': 'application/json;charset=UTF-8',
						"Access-Control-Allow-Origin": "*",
					}
				};
				const res = await axios.post("http://localhost:3000/api/user/register", {
					Name:name,
					MobileNo:mobno,
					Year:year,
					Email: email,
					password: password,
					Department:dept,
					College:clg
				})
				if (res.data.type) {
					flashContainer.classList.remove("alert-danger");
					flashContainer.classList.add("alert-success");
					flashContainer.style.display = "block";
					flashContainer.innerText = res.data.msg;
					window.location.replace("/app/pages/email_verification.html")
				} else {
					flashContainer.classList.add("alert-danger");
					flashContainer.classList.remove("alert-success");
					flashContainer.style.display = "block";
					flashContainer.innerText = res.data.msg;
				}
			}
			let submitBtn = document.getElementById("submit-btn");
			submitBtn.addEventListener("click", (e) => {
				e.preventDefault();
				sendData();
			});
	</script>
</body>

</html>
